## Исследование формата файлов пресетов CP-100

### Функционал устройства

Какой функционал получилось отреверсить:
- [OK] Volume - мастер-громкость
- [OK] ER - ревер или эффект комнаты
- [OK] PS - Presence или яркость усилителя
- [OK] LP - Low-pass filter - срез верхних частот
- [OK] EQ-Микшер
- [OK] EQ-Частоты
- [OK] EQ-Добротность
- [OK] HP - High-pass filter - срез нижних частот
- [OK] IR - Импульс кабинета (вкл / выкл)
- [OK] PA - Эмулятор усилителя мощности
- [OK] PR - Эмулятор гитарного предусилителя
- [OK] CM - Компрессор
- [OK] NG - Noise gate или шумодав 

## Дамп файла

**Легенда**
- XX полезные данные
- -- нулевые байты (исследовано не полностью)

**Карта файла**

    00000000  XX XX XX XX XX XX XX XX  XX XX XX XX XX XX XX XX  |................|
    00000010  XX XX XX XX XX XX XX XX  XX XX XX XX XX XX XX XX  |................|
    00000020  XX XX XX XX XX XX XX XX  XX XX XX -- -- -- -- --  |................|
    00000030  -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --  |................|
    00000040  -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --  |................|
    00000050  -- -- -- -- -- -- -- --  -- --                    |..........|


## Разметка

00000000 - 00 - EQ-Микшер - Hz [20-220]
00000000 - 01 - EQ-Микшер - Hz [260-460]
00000000 - 02 - EQ-Микшер - Hz [600-1k]
00000000 - 03 - EQ-Микшер - Hz [1k-3k]
00000000 - 04 - EQ-Микшер - Hz [1k-11k]
00000000 - 05 - ER volume
00000000 - 06 - ER type
00000000 - 07 - Master volume
00000000 - 08 - IR on / off
00000000 - 09 - EQ on / off
00000000 - 10 - ER on / off
00000000 - 11 - PA on / off
00000000 - 12 - PA Volume
00000000 - 13 - PA Slave
00000000 - 14 - PA index
00000000 - 15 - PR on / off

00000010 - 16 - PR - Volume
00000010 - 17 - PR - LOW
00000010 - 18 - PR - MID
00000010 - 19 - PR - HIGH
00000010 - 20 - NG on / off
00000010 - 21 - NG Thresh
00000010 - 22 - NG Decay
00000010 - 23 - CM on / off
00000010 - 24 - CM Sustain (?)
00000010 - 25 - CM Volume (?)
00000010 - 26 - EQ-Частоты - Hz [20-220]
00000010 - 27 - EQ-Частоты - Hz [260-460]
00000010 - 28 - EQ-Частоты - Hz [600-1k]
00000010 - 29 - EQ-Частоты - Hz [1k-3k]
00000010 - 30 - EQ-Частоты - Hz [1k-11k]
00000010 - 31 - EQ-Добротность - Hz [20-220] [0.1-20; step 0.1]

00000020 - 32 - EQ-Добротность - Hz [260-460] [0.1-20; step 0.1]
00000020 - 33 - EQ-Добротность - Hz [600-1k] [0.1-20; step 0.1]
00000020 - 34 - EQ-Добротность - Hz [1k-3k] [0.1-20; step 0.1]
00000020 - 35 - EQ-Добротность - Hz [1k-11k] [0.1-20; step 0.1]
00000020 - 36 - LP value
00000020 - 37 - HP value
00000020 - 38 - HP on / off
00000020 - 39 - LP on / off
00000020 - 40 - Presence on / off
00000020 - 41 - Presence value
00000020 - 42 - EQ post / pre

## Детализация

### Общее

00000000 - 07 - Master volume
00000000 - 08 - IR on / off

### Ревер

00000000 - 05 - ER volume
00000000 - 06 - ER type (short medium long: 00, 01, 02)
00000000 - 10 - ER on / off

### Эмулятор усилителя мощности

00000000 - 11 - PA on / off
00000000 - 12 - PA Volume
00000000 - 13 - PA Slave
00000000 - 14 - PA index
00000020 - 08 - Presence on / off
00000020 - 09 - Presence value

### Предусилитель

00000000 - 15 - PR on / off
00000010 - 00 - PR - Volume - (0d = ui 13 = dec 13)
00000010 - 01 - PR - LOW - (dc = ui 28 = dec 220); что такое 192?
00000010 - 02 - PR - MID - (e8 = ui 40 = dec 232); что такое 192?
00000010 - 03 - PR - HIGH - (ef - ee = ui 47 - 46 = dec 239 - 238); что такое 192?

### Noise Gate

00000010 - 04 - NG on / off
00000010 - 05 - NG Thresh
00000010 - 06 - NG Decay

### Compressor

00000010 - 07 - CM on / off
00000010 - 08 - CM Sustain (?)
00000010 - 09 - CM Volume (?)

### Фильтры

00000020 - 04 - LP value (Math.pow(195.0-value, 2) * (19000.0/Math.pow(195.0, 2.0)) + 1000.0).toFixed()
00000020 - 05 - HP value ((value*980.0/255.0)+20.0).toFixed()
00000020 - 06 - HP on / off
00000020 - 07 - LP on / off

### Пятиполосный параметрический эквалайзер

00000000 - 09 - EQ on / off
00000020 - 10 - EQ post / pre

00000000 - 00 - EQ-Микшер - Hz  [20-220] - basis (0f; dec 15) val (x18) 18 - 0f = 9 (ui = 8) *
00000000 - 01 - EQ-Микшер - Hz [260-460] - basis (0f; dec 15) val (x09) 0f - 09 = 6 (ui = -6)
00000000 - 02 - EQ-Микшер - Hz  [600-1k] - basis (0f; dec 15) val (x13) 13 - 0f = 4 (ui = 3) *
00000000 - 03 - EQ-Микшер - Hz   [1k-3k] - basis (0f; dec 15) val (x0d) 0f - 0d = 2 (ui = -3)
00000000 - 04 - EQ-Микшер - Hz  [1k-11k] - basis (0f; dec 15) val (x0d) 11 - 0f = 2 (ui = 1) *

00000010 - 10 - EQ-Частоты - Hz   [20-220] ui считает единичками
00000010 - 10 - EQ-Частоты - Hz   [20-220] def  120 - xAA - 170 - ui 34  (34  = 120(def) + 170 - 256)
00000010 - 10 - EQ-Частоты - Hz   [20-220] def  120 - x29  - 41 - ui 161 (161 = 120(def) + 41)

00000010 - 11 - EQ-Частоты - Hz  [260-460] ui считает единичками
00000010 - 11 - EQ-Частоты - Hz  [260-460] def  360 - xE2 - 226 - ui 330 (330 = 360(def) + 226 - 256)
00000010 - 11 - EQ-Частоты - Hz  [260-460] def  360 - x64 - 100 - ui 460 (460 = 360(def) + 100) (max)

00000010 - 12 - EQ-Частоты - Hz   [600-1k] ui считает двойками
00000010 - 12 - EQ-Частоты - Hz   [600-1k] def  800 - xD6 - 214 - ui 716 (716 = 800(def) + 2 * (214 - 256))
00000010 - 12 - EQ-Частоты - Hz   [600-1k] def  800 - x9C - 156 - ui 600 (600 = 800(def) + 2 * (156 - 256)) (min)

00000010 - 13 - EQ-Частоты - Hz    [1k-3k] ui считает десятками
00000010 - 13 - EQ-Частоты - Hz    [1k-3k] def 2000 - xE4 - 228 - ui 1720 (1720 = 2000(def) + 10 * (228 - 256))
00000010 - 13 - EQ-Частоты - Hz    [1k-3k] def 2000 - x2E -  46 - ui 2460 (2460 = 2000(def) + 10 * 46)

00000010 - 14 - EQ-Частоты - Hz   [1k-11k] ui считает 50-ками
00000010 - 14 - EQ-Частоты - Hz   [1k-11k] def 6000 - xE7 - 231 - ui 4750 (4750 = 6000(def) + 50 * (231 - 256)) 
00000010 - 14 - EQ-Частоты - Hz   [1k-11k] def 6000 - x9C - 156 - ui 1000 (1000 = 6000(def) + 50 * 100) (min)

00000010 - 15 - EQ-Добротность - Hz  [20-220] [0.1-20; step 0.1] def 10.1 x9C - 156 - ui  0.1 (min) (1 = 101(def) + (156 - 256))
00000020 - 00 - EQ-Добротность - Hz [260-460] [0.1-20; step 0.1] def 10.1 xD7 - 215 - ui  6.0 (---) (60 = 101(def) + (215 - 256))
00000020 - 01 - EQ-Добротность - Hz  [600-1k] [0.1-20; step 0.1] def 10.1 xEA - 234 - ui  7.9 (---) (79 = 101(def) + (234 - 256))
00000020 - 02 - EQ-Добротность - Hz   [1k-3k] [0.1-20; step 0.1] def 10.1 x1F -  31 - ui 13.2 (---) (132 = 101(def) + 31)
00000020 - 03 - EQ-Добротность - Hz  [1k-11k] [0.1-20; step 0.1] def 10.1 x63 -  99 - ui 20.0 (max) (200 = 101(def) + 99)

## Черновик

HP Value (не сходится min & max)
- 1e (dec 30) - (30*4=120) = 135 - 15
- 21 (dec 33) - (33*4=132) = 147 - 15
- 00 (dec 00) - () = 20
- ff (dec 255) - () = 1000

147 - 135 = 12
33 - 30  = 3

LP Value
- 5e (dec 94) - 6097  (срез 20000 -  6097 = 13903)
- 36 (dec 54) - 10934 (срез 20000 - 10934 = 9066)
- 00 (dec 00) - 20000 (без среза)
